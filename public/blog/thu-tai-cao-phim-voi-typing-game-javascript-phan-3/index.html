<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Th·ª≠ t√†i c√†o ph√≠m v·ªõi Typing Game - Javascript (ph·∫ßn 3) | Tech&#39;s Blog</title>
<meta name="keywords" content="FrontEnd, Javascript, Web, Game">
<meta name="description" content="Trong n·ªôi dung b√†i vi·∫øt h∆∞·ªõng d·∫´n Typing Game (ph·∫ßn 3), m√¨nh s·∫Ω ti·∫øp t·ª•c l√†m c√°c ch·ª©c nƒÉng c√≤n l·∫°i c·ªßa Typing game bao g·ªìm ...">
<meta name="author" content="">
<link rel="canonical" href="https://buihien.org/blog/thu-tai-cao-phim-voi-typing-game-javascript-phan-3/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.a72801f0f40a8d7f71aa1cafd1c2f2a993a1f26ca1cfd38fdba65d5b9b0f08a0.css" integrity="sha256-pygB8PQKjX9xqhyv0cLyqZOh8myhz9OP26ZdW5sPCKA=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.b95bacdc39e37a332a9f883b1e78be4abc1fdca2bc1f2641f55e3cd3dabd4d61.js" integrity="sha256-uVus3DnjejMqn4g7Hni&#43;Srwf3KK8HyZB9V4809q9TWE="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://buihien.org/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://buihien.org/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://buihien.org/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://buihien.org/apple-touch-icon.png">
<link rel="mask-icon" href="https://buihien.org/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Th·ª≠ t√†i c√†o ph√≠m v·ªõi Typing Game - Javascript (ph·∫ßn 3)" />
<meta property="og:description" content="Trong n·ªôi dung b√†i vi·∫øt h∆∞·ªõng d·∫´n Typing Game (ph·∫ßn 3), m√¨nh s·∫Ω ti·∫øp t·ª•c l√†m c√°c ch·ª©c nƒÉng c√≤n l·∫°i c·ªßa Typing game bao g·ªìm ..." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://buihien.org/blog/thu-tai-cao-phim-voi-typing-game-javascript-phan-3/" />
<meta property="og:image" content="https://buihien.org/blog/typing-game/typing-game-3.png" /><meta property="article:section" content="blog" />



<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://buihien.org/blog/typing-game/typing-game-3.png" />
<meta name="twitter:title" content="Th·ª≠ t√†i c√†o ph√≠m v·ªõi Typing Game - Javascript (ph·∫ßn 3)"/>
<meta name="twitter:description" content="Trong n·ªôi dung b√†i vi·∫øt h∆∞·ªõng d·∫´n Typing Game (ph·∫ßn 3), m√¨nh s·∫Ω ti·∫øp t·ª•c l√†m c√°c ch·ª©c nƒÉng c√≤n l·∫°i c·ªßa Typing game bao g·ªìm ..."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Blogs",
      "item": "https://buihien.org/blog/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Th·ª≠ t√†i c√†o ph√≠m v·ªõi Typing Game - Javascript (ph·∫ßn 3)",
      "item": "https://buihien.org/blog/thu-tai-cao-phim-voi-typing-game-javascript-phan-3/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Th·ª≠ t√†i c√†o ph√≠m v·ªõi Typing Game - Javascript (ph·∫ßn 3)",
  "name": "Th·ª≠ t√†i c√†o ph√≠m v·ªõi Typing Game - Javascript (ph·∫ßn 3)",
  "description": "Trong n·ªôi dung b√†i vi·∫øt h∆∞·ªõng d·∫´n Typing Game (ph·∫ßn 3), m√¨nh s·∫Ω ti·∫øp t·ª•c l√†m c√°c ch·ª©c nƒÉng c√≤n l·∫°i c·ªßa Typing game bao g·ªìm ...",
  "keywords": [
    "FrontEnd", "Javascript", "Web", "Game"
  ],
  "articleBody": "Ch√†o m·ªçi ng∆∞·ªùi, ·ªü b√†i vi·∫øt Typing Game (ph·∫ßn 2) m√¨nh ƒë√£ h∆∞·ªõng d·∫´n c√°c b·∫°n c√°c ch·ª©c nƒÉng : ƒê·∫øm ng∆∞·ª£c th·ªùi gian, x·ª≠ l√Ω khi ng∆∞·ªùi ch∆°i g√µ t·ª´, ch∆°i l·∫°i game\nKh√¥ng bi·∫øt trong qu√° tr√¨nh th·ª±c hi·ªán c√°c b·∫°n c√≥ g·∫∑p l·ªói l·∫ßm g√¨ kh√¥ng, h√£y comment cho m√¨nh bi·∫øt nh√©\nTrong n·ªôi dung b√†i vi·∫øt h∆∞·ªõng d·∫´n Typing Game (ph·∫ßn 3), m√¨nh s·∫Ω ti·∫øp t·ª•c l√†m c√°c ch·ª©c nƒÉng c√≤n l·∫°i c·ªßa Typing game bao g·ªìm :\nC·∫≠p nh·∫≠t k·∫øt qu·∫£ ng∆∞∆°i ch∆°i Demo ch·ª©c nƒÉng b·∫£ng x·∫øp h·∫°ng ng∆∞·ªùi ch∆°i Ok, Let‚Äôs go !! üòÅ\nC·∫≠p nh·∫≠t k·∫øt qu·∫£ ng∆∞∆°i ch∆°i Khi n√†o ch√∫ng ta c·∫≠p nh·∫≠t k·∫øt qu·∫£ cho ng∆∞·ªùi?\nT·∫•t nhi√™n l√† khi h·∫øt th·ªùi gian r·ªìi ph·∫£i kh√¥ng n√†o (time = 0). V·∫≠y khi c·∫≠p nh·∫≠t k·∫øt qu·∫£ cho ng∆∞·ªùi ch∆°i, ch√∫ng ta c·∫ßn hi·ªÉn th·ªã c√°c th√¥ng tin g√¨\nT·ª´ ·∫£nh tr√™n, ch√∫ng ta c√≥ th·ªÉ d·ªÖ d√†ng nh·∫≠n th·∫•y, c√°c th√¥ng tin c·∫ßn c·∫≠p nh·∫≠t bao g·ªìm :\nCh·ªâ s·ªë WPM : S·ªë t·ª´ g√µ m·ªói ph√∫t S·ªë k√Ω t·ª± g√µ ƒë√∫ng S·ªë k√Ω t·ª± g√µ sai T·ªïng s·ªë k√Ω t·ª± ƒë√£ g√µ ƒê·ªô ch√≠nh x√°c khi g√µ S·ªë t·ª´ g√µ ƒë√∫ng S·ªë t·ª´ g√µ sai R·∫•t nhi·ªÅu th√¥ng tin ph·∫£i kh√¥ng n√†o, ch√∫ng ta ph·∫£i t·ª± m√¨nh t√≠nh to√°n th√¥i\nfunction countdownTime() { ... if (time == 0) { ... // C·∫≠p nh·∫≠t k·∫øt qu·∫£ ng∆∞·ªùi ch∆°i updateInfoPlayer(); } } Trong function countdownTime(), khi time = 0, m√¨nh s·∫Ω g·ªçi function updateInfoPlayer() ƒë·ªÉ ti·∫øn h√†nh c·∫≠p nh·∫≠t k·∫øt qu·∫£ cho ng∆∞·ªùi ch∆°i\n// Th√¥ng tin ng∆∞·ªùi ch∆°i const wordsCorrectEl = document.querySelector('.words-correct'); const wordsWrongEl = document.querySelector('.words-wrong'); const wpmCountEl = document.querySelector('.wps-count'); const characterCorrectCountEl = document.querySelector('.character-correct-count'); const characterWrongCountEl = document.querySelector('.character-wrong-count'); const characterCountEl = document.querySelector('.character-count'); const percentCorrectEl = document.querySelector('.percent-correct'); function updateInfoPlayer() { let spans = document.querySelectorAll('#words span'); let totalCorrectWords = 0; // T·ªïng s·ªë t·ª´ g√µ ƒë√∫ng let totalWrongWords = 0; // T·ªïng s·ªë t·ª´ g√µ sai let totalCorrectCharacters = 0; // T·ªïng s·ªë k√Ω t·ª± g√µ ƒë√∫ng let totalWrongCharacters = 0; // T·ªïng s·ªë k√Ω t·ª± g√µ sai let totalCharacters = 0; // T·ªïng s·ªë k√Ω t·ª± ƒë√£ g√µ for (let i = 0; i \u003c spans.length; i++) { // ƒê·∫øm s·ªë t·ª´ v√† k√Ω t·ª± ƒë√∫ng if (spans[i].classList.contains('correct')) { totalCorrectWords++; totalCorrectCharacters += spans[i].innerText.length; } // ƒê·∫øm s·ªë t·ª´ v√† k√Ω t·ª± sai if (spans[i].classList.contains('wrong')) { totalWrongWords++; totalWrongCharacters += spans[i].innerText.length; } } // C·∫≠p nh·∫≠t s·ªë t·ª´ ƒë√∫ng - sai wordsCorrectEl.innerText = totalCorrectWords; wordsWrongEl.innerText = totalWrongWords; // T√≠nh to√°n WPM totalCharacters = totalCorrectCharacters + totalWrongCharacters; wpm = Math.round(totalCharacters / 5 / (wpmTime / 60)); wpmCountEl.innerText = `${wpm} WPM`; // C·∫≠p nh·∫≠t s·ªë k√Ω t·ª± ƒë√∫ng - sai characterCorrectCountEl.innerText = totalCorrectCharacters; characterWrongCountEl.innerText = totalWrongCharacters; characterCountEl.innerText = totalCharacters; // C·∫≠p nh·∫≠t ph·∫ßn trƒÉm t·ª´ g√µ ch√≠nh x√°c percentCorrectEl.innerText = `${( (totalCorrectWords * 100) / (totalCorrectWords + totalWrongWords) ).toFixed(2)}%`; } V√¨ function tr√™n m√¨nh c·∫ßn t√≠nh to√°n r·∫•t nhi·ªÅu th√¥ng tin c·ªßa ng∆∞·ªùi ch∆°i n√™n c√≥ h∆°i d√†i 1 t√≠\nƒê·ªÉ t√≠nh to√°n s·ªë t·ª´ v√† k√Ω t·ª± ƒë√∫ng, m√¨nh s·∫Ω duy·ªát qua m·∫£ng spans, v·ªõi m·ªói v√≤ng l·∫∑p m√¨nh s·∫Ω ki·ªÉm tra xem ph·∫ßn t·ª≠ span ƒë√≥ c√≥ ch·ª©a class ‚Äòcorrect‚Äô hay kh√¥ng. Tr∆∞·ªùng h·ª£p ph·∫ßn t·ª≠ span ƒë√≥ c√≥ ch·ª©a class ‚Äòcorrect‚Äô (t·ª©c l√† t·ª´ n√†y ƒë√£ g√µ ƒë√∫ng), m√¨nh s·∫Ω tƒÉng totalCorrectWords (T·ªïng s·ªë t·ª´ g√µ ƒë√∫ng) l√™n 1 ƒë∆°n v·ªã, v√† totalCorrectCharacters (T·ªïng s·ªë k√Ω t·ª± g√µ ƒë√∫ng) s·∫Ω ƒë∆∞·ª£c c·ªông d·ªìn v·ªõi ƒë·ªô d√†i c·ªßa n·ªôi dung trong th·∫ª span ƒë√≥\nV·ªõi t·ª´ v√† k√Ω t·ª± g√µ sai m√¨nh c≈©ng l√†m t∆∞∆°ng t·ª± b·∫±ng vi·ªác ki·ªÉm tra v·ªõi class ‚Äòwrong‚Äô\nTr√™n m·∫°ng c√≥ nhi·ªÅu c√¥ng th·ª©c t√≠nh WPM v·ªõi m·ª©c ƒë·ªô ph·ª©c t·∫°p kh√°c nhau, trong b√†i vi·∫øt n√†y, ƒë·ªÉ ƒë∆°n gi·∫£n h√≥a m√¨nh ƒë√£ √°p d·ª•ng c√¥ng th·ª©c tr√™n\n·ªû function updateInfoPlayer() c√≥ m·ªôt ƒëo·∫°n m√† c√°c b·∫°n c·∫ßn ch√∫ √Ω\nwpm = Math.round(totalCharacters / 5 / (wpmTime / 60)); Trong c√¥ng th·ª©c tr√™n m√¨nh c√≥ s·ª≠ d·ª•ng wpmTime m√† kh√¥ng ph·∫£i l√† time, b·ªüi v√¨ khi m√¨nh c·∫≠p nh·∫≠t th√¥ng tin ng∆∞·ªùi ch∆°i, l√∫c n√†y time = 0 r·ªìi, n·∫øu m√¨nh √°p d·ª•ng v√†o c√¥ng th·ª©c tr√™n s·∫Ω cho k·∫øt qu·∫£ l√† ‚Äô‚Äô infinity\"\nN√™n l√∫c n√†y m√¨nh s·∫Ω t·∫°o ra bi·∫øn wpmTime = time l√∫c kh·ªüi t·∫°o ch√∫ng ta kh·ªüi t·∫°o gi√° tr·ªã time ban ƒë·∫ßu trong function init()\nlet wpmTime; let wpm function init() { time = 10; wpmTime = time; wpm = 0; // ... } C√°c b·∫°n c√≥ th·ªÉ ch∆°i th·ª≠ ƒë·ªÉ xem m·ª©c ƒë·ªô c√†o ph√≠m c·ªßa m√¨nh ƒëang ·ªü m·ª©c n√†o nh√©\nT·ªëc ƒë·ªô ƒë√°nh m√°y th·∫•p: 0-60 WPM T·ªëc ƒë·ªô ƒë√°nh m√°y trung b√¨nh: 60-90 WPM T·ªëc ƒë·ªô ƒë√°nh m√°y cao: 90-130 WPM T·ªëc ƒë·ªô ƒë√°nh m√°y chuy√™n nghi·ªáp: 130-170 WPM T·ªëc ƒë·ªô c·ªßa m√¨nh ·ªü m·ª©c trung b√¨nh th√¥i, ƒë·ªß ƒë·ªÉ toxic v·ªõi ƒë·ªìng ƒë·ªôi trong c√°c pha combat t·ªïng 5 vs 5 üòÅ\nB·∫£ng x·∫øp h·∫°ng ng∆∞·ªùi ch∆°i ƒê·ªÉ tƒÉng th√™m ph·∫ßn gay c·∫•n m√† c√≥ l√†m th√™m ch·ª©c nƒÉng b·∫£ng x·∫øp h·∫°ng ng∆∞·ªùi ch∆°i\nGiao di·ªán ph·∫ßn b·∫£ng x·∫øp h·∫°ng n√†y ch√∫ng ta c√≥ th·ªÉ quan s√°t nh∆∞ sau\nGiao di·ªán tr√™n l√† m√¨nh ƒë√£ fix c·ª©ng code trong m√£ HTML ƒë·ªÉ c√°c b·∫°n c√≥ c√°i nh√¨n tr·ª±c quan cho ph·∫ßn b·∫£ng x·∫øp h·∫°ng n√†y. ·ªû ƒë√¢y m√¨nh ƒë√£ v√≠ d·ª• v·ªõi 3 ng∆∞·ªùi ch∆°i. Ch√∫ng ta c√≥ th·ªÉ d·ªÖ d√†ng nh·∫≠n th·∫•y ƒë∆∞·ª£c, v·ªõi m·ªói ng∆∞·ªùi ch∆°i ch√∫ng ta c·∫ßn hi·ªÉn th·ªã c√°c th√¥ng tin g√¨\n·∫¢nh ng∆∞·ªùi ch∆°i T√™n ng∆∞·ªùi ch∆°i Ch·ªâ s·ªë wpm Th·ªùi gian ch∆°i (ƒë·ªãnh d·∫°ng hh:mm:ss - dd/mm/yyyy) ƒê·ªÉ linh ƒë·ªông cho vi·ªác hi·ªán th·ªã, kh√¥ng fix c·ª©ng code html v√† ch√∫ng ta c√≥ th·ªÉ th√™m b·∫£n ghi v√†o b·∫£ng x·∫øp h·∫°ng khi ng∆∞·ªùi ch∆°i k·∫øt th√∫c l∆∞·ª£t ch∆°i. V√¨ v·∫≠y m√¨nh ƒë√£ mockup m·ªôt m·∫£ng ranking ƒë·ªÉ ph·ª•c v·ª• cho ƒëi·ªÅu n√†y, m·ªói ph·∫ßn t·ª≠ trong m·∫£ng ranking n√†y s·∫Ω ƒë·∫°i di·ªán cho th√¥ng tin c·ªßa ng∆∞·ªùi ch∆°i\n// Mock up m·∫£ng rank let ranking = [ { avatar: 'https://images.unsplash.com/photo-1507525428034-b723cf961d3e?ixid=MnwxMjA3fDB8MHxzZWFyY2h8MXx8bmhhJTIwdHJhbmclMjBiZWFjaHxlbnwwfHwwfHw%3D\u0026ixlib=rb-1.2.1\u0026w=1000\u0026q=80', username: 'Nguyen Van A', wpm: 10, time: formatDate(new Date(2021, 3, 27, 11, 33, 30)), }, { avatar: 'https://ec.europa.eu/jrc/sites/jrcsh/files/styles/normal-responsive/public/fotolia-92027264european-day-forest-green-forest.jpg?itok=biCWJPQQ', username: 'Tran Van B', wpm: 500, time: formatDate(new Date(2021, 3, 26, 16, 33, 30)), }, { avatar: 'https://images.unsplash.com/photo-1569389397653-c04fe624e663?ixid=MnwxMjA3fDF8MHxlZGl0b3JpYWwtZmVlZHwxfHx8ZW58MHx8fHw%3D\u0026ixlib=rb-1.2.1\u0026auto=format\u0026fit=crop\u0026w=500\u0026q=60', username: 'Phan Thi C', wpm: 151, time: formatDate(new Date(2021, 3, 27, 02, 33, 30)), }, ]; Trong m·∫£ng ranking, m√¨nh ƒë√£ mockup th√¥ng tin c·ªßa 3 user, m·ªói user bao g·ªìm c√°c th√¥ng tin nh∆∞ : avatar, username, wpm, time\nRi√™ng ƒë·ªëi v·ªõi thu·ªôc t√≠nh time, m√¨nh c√≥ ƒë·ªãnh nghƒ©a th√™m function formatDate() ƒë·ªÉ format time theo chu·∫©n hh:mm:ss - dd/mm/yyyy\nfunction formatDate(date) { let year = date.getFullYear(); let month = `0${date.getMonth() + 1}`.slice(-2); let day = `0${date.getDate()}`.slice(-2); let hour = `0${date.getHours()}`.slice(-2); let minute = `0${date.getMinutes()}`.slice(-2); let second = `0${date.getSeconds()}`.slice(-2); return `${hour}:${minute}:${second} - ${day}/${month}/${year}`; } Function formatDate() c≈©ng t∆∞∆°ng t·ª± nh∆∞ covertTime(), ƒë·ªÉ ƒë·∫£m b·∫£o th·ªùi gian hi·ªÉn th·ªã ƒë√∫ng theo ƒë·ªãnh d·∫°ng m√† m√¨nh mong mu·ªën ( hh:mm:ss - dd/mm/yyyy)\nRender b·∫£ng x·∫øp h·∫°ng const tableEl = document.querySelector('tbody'); // render ranking function renderRanking(arr) { // S·∫Øp x·∫øp th·ª© t·ª± ng∆∞·ªùi ch∆°i theo wpm gi·∫£m d·∫ßn let arrSort = arr.sort(function (a, b) { return b.wpm - a.wpm; }); // L·∫•y ra danh s√°ch TOP 10 let arrTop10 = arrSort.slice(0, 10) // Render l√™n giao di·ªán tableEl.innerHTML = ''; for (let i = 0; i \u003c arrTop10.length; i++) { const u = arrTop10[i] tableEl.innerHTML += ` ${i + 1} ${u.username} ${u.wpm} ${u.time} `; } } ƒê·ªÉ render m·∫£ng ranking ch√∫ng ta v·ª´a mockup ra ngo√†i giao di·ªán, m√¨nh ƒë√£ ƒë·ªãnh nghƒ©a function renderRanking() v·ªõi tham s·ªë truy·ªÅn v√†o l√† m·∫£ng arr\nTrong function renderRanking() n√†y m√¨nh ti·∫øn h√†nh chia l√†m 3 b∆∞·ªõc:\nS·∫Øp x·∫øp th·ª© t·ª± ng∆∞·ªùi ch∆°i theo wpm gi·∫£m d·∫ßn L·∫•y ra danh s√°ch TOP 10 Render l√™n giao di·ªán V·ªõi b∆∞·ªõc 1 v√† b∆∞·ªõc 2 kh√¥ng c√≥ g√¨ ƒë·∫∑c bi·ªát, ri√™ng ƒë·ªëi v·ªõi b∆∞·ªõc 3 m√¨nh ti·∫øn h√†nh x·ª≠ l√Ω nh∆∞ sau:\nƒê·∫ßu ti√™n clear h·∫øt d·ªØ li·ªáu c·ªßa table ƒëang fix c·ª©ng trong m√£ html ƒë·ªÉ render d·ªØ li·ªáu t·ª´ m·∫£ng ƒë√£ mockup t·ª´ tr∆∞·ªõc\ntableEl.innerHTML = ''; Sau ƒë√≥ s·ª≠ d·ª•ng v√≤ng l·∫∑p for ƒë·ªÉ duy·ªát qua c√°c ph·∫ßn t·ª≠ c·ªßa m·∫£ng arrTop10 (m·ªói ph·∫ßn t·ª≠ c·ªßa m·∫£ng l√† object ch·ª©a th√¥ng tin c·ªßa ng∆∞·ªùi ch∆°i)\nV·ªõi m·ªói v√≤ng l·∫∑p, m√¨nh s·∫Ω t·∫°o ra m·ªôt c·∫•u tr√∫c HTML c·ªßa 1 b·∫£n ghi ranking (c√°c b·∫°n c√≥ th·ªÉ copy trong file html ban ƒë·∫ßu nh√©, to√†n b·ªô th·∫ª tr trong tbody c·ªßa table ƒë·∫•y). Sau ƒë√≥ m√¨nh ch·ªâ c·∫ßn ch√®n c√°c gi√° tr·ªã t∆∞∆°ng ·ª©ng v√†o th√¥i, ·ªü ƒë√¢y ƒë·ªÉ ch√®n gi√° tr·ªã m√¨nh s·ª≠ d·ª•ng c√∫ ph√°p c·ªßa template string trong ES6 (${}) nh∆∞ng c√°c b·∫°n n√™n nh·ªõ ph·∫£i ƒë·∫∑t trong d·∫•u backtick nh√© (``) ch·ª© kh√¥ng ph·∫£i d·∫•u nh√°y k√©p ƒë√¢u.\nSau khi ƒë·ªãnh nghƒ©a xong function renderRanking() m√¨nh s·∫Ω ti·∫øn h√†nh g·ªçi n√≥ trong function init()\nfunction init() { // ... // Render b·∫£ng x·∫øp h·∫°ng ng∆∞·ªùi ch∆°i renderRanking(ranking); } K·∫øt qu·∫£ sau khi mockup v√† hi·ªÉn th·ªã b·∫£ng x·∫øp h·∫°ng\nTh·∫≠t tuy·ªát ph·∫£i kh√¥ng n√†o üòÅ\nTh√™m ng∆∞·ªùi ch∆°i v√†o b·∫£ng x·∫øp h·∫°ng function countdownTime() { // ... if (time == 0) { // ... addPlayerToRanking(); } } Khi time = 0, m√¨nh s·∫Ω g·ªçi function addPlayerToRanking() ƒë·ªÉ th√™m b·∫£n ghi c·ªßa ng∆∞·ªùi ch∆°i v√†o b·∫£ng x·∫øp h·∫°ng\nfunction addPlayerToRanking() { // T·∫°o 1 b·∫£n ghi ng∆∞·ªùi ch∆°i let player = { avatar: 'https://images.unsplash.com/photo-1564564321837-a57b7070ac4f?ixid=MnwxMjA3fDB8MHxzZWFyY2h8Nnx8bWFufGVufDB8fDB8fA%3D%3D\u0026ixlib=rb-1.2.1\u0026auto=format\u0026fit=crop\u0026w=500\u0026q=60', username: 'B√πi Hi√™n', wpm: wpm, time: formatDate(new Date()), } // Th√™m b·∫£n ghi v√†o m·∫£ng ranking ranking.push(player) // Render l·∫°i b·∫£ng x·∫øp h·∫°ng sau khi th√™m b·∫£n ghi m·ªõi renderRanking(ranking) } V√¨ hi·ªán t·∫°i trong game ch∆∞a c√≥ c∆° ch·∫ø ƒëƒÉng nh·∫≠p ·ªü bi·∫øt ng∆∞·ªùi ch∆°i hi·ªán t·∫°i l√† ai? N√™n ·ªü ƒë√¢y m√¨nh c√≥ t·∫°o ra bi·∫øn player ch∆∞a th√¥ng tin ng∆∞·ªùi ch∆°i v·ª´a k·∫øt th√∫c l∆∞·ª£t ch∆°i c·ªßa m√¨nh\nTrong player c√≥ 2 th√¥ng tin m√† m√¨nh ƒëƒÉng fix c·ª©ng l√† avatar v√† username, c√≤n wpm l√† k·∫øt qu·∫£ c·ªßa ng∆∞·ªùi ch∆°i trong l·∫ßn ch∆°i ƒë√≥, v√† time l√† th·ªùi gian sau khi l∆∞·ª£t ch∆°i k·∫øt th√∫c\nTi·∫øp theo ch√∫ng ta s·∫Ω th√™m b·∫£n ghi player v√†o m·∫£ng ranking\nV√† cu·ªëi c√πng l√† g·ªçi renderRanking(ranking) ƒë·ªÉ render l·∫°i b·∫£ng x·∫øp h·∫°ng sau khi th√™m b·∫£n ghi m·ªõi\nK·∫øt qu·∫£ sau 1 s·ªë l∆∞·ª£t ch∆°i c·ªßa m√¨nh nh∆∞ sau\nSource code c·ªßa ph·∫ßn n√†y m√¨nh ƒë·ªÉ ·ªü ƒë√¢y nh√© : https://github.com/buihien0109/typing-game-javascript/tree/master/typing-part-3\nC√°c b·∫°n c√≥ th·ªÉ tham kh·∫£o th√™m kh√≥a h·ªçc n√†y nh√©:\nJavascript cƒÉn b·∫£n - T·ªïng h·ª£p 12 game huy·ªÅn tho·∫°i - t·∫°i ƒë√¢y. Kh√≥a h·ªçc Web Frontend (HTML, CSS, JavaScript) + ReactJs - t·∫°i ƒë√¢y ",
  "wordCount" : "1774",
  "inLanguage": "en",
  "image":"https://buihien.org/blog/typing-game/typing-game-3.png","datePublished": "0001-01-01T00:00:00Z",
  "dateModified": "0001-01-01T00:00:00Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://buihien.org/blog/thu-tai-cao-phim-voi-typing-game-javascript-phan-3/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Tech's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://buihien.org/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header sticky-header">
    <nav class="nav">
        <div class="logo">
            <a href="https://buihien.org" accesskey="h" title="Tech&#39;s Blog (Alt + H)">Tech&#39;s Blog</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://buihien.org/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="https://buihien.org/blog" title="Blog">
                    <span>Blog</span>
                </a>
            </li>
            <li>
                <a href="https://buihien.org/tags" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://buihien.org/search" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://buihien.org">Home</a>&nbsp;¬ª&nbsp;<a href="https://buihien.org/blog/">Blogs</a></div>
    <h1 class="post-title">
      Th·ª≠ t√†i c√†o ph√≠m v·ªõi Typing Game - Javascript (ph·∫ßn 3)
    </h1>
    <div class="post-description">
      Trong n·ªôi dung b√†i vi·∫øt h∆∞·ªõng d·∫´n Typing Game (ph·∫ßn 3), m√¨nh s·∫Ω ti·∫øp t·ª•c l√†m c√°c ch·ª©c nƒÉng c√≤n l·∫°i c·ªßa Typing game bao g·ªìm ...
    </div>
    <div class="post-meta">


26/12/2022

</div>
  </header> 
<figure class="entry-cover"><img loading="lazy" src="https://buihien.org/blog/typing-game/typing-game-3.png" alt="">
        
</figure><div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">‚Äé Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#c%e1%ba%adp-nh%e1%ba%adt-k%e1%ba%bft-qu%e1%ba%a3-ng%c6%b0%c6%a1i-ch%c6%a1i" aria-label="C·∫≠p nh·∫≠t k·∫øt qu·∫£ ng∆∞∆°i ch∆°i">C·∫≠p nh·∫≠t k·∫øt qu·∫£ ng∆∞∆°i ch∆°i</a></li>
                <li>
                    <a href="#b%e1%ba%a3ng-x%e1%ba%bfp-h%e1%ba%a1ng-ng%c6%b0%e1%bb%9di-ch%c6%a1i" aria-label="B·∫£ng x·∫øp h·∫°ng ng∆∞·ªùi ch∆°i">B·∫£ng x·∫øp h·∫°ng ng∆∞·ªùi ch∆°i</a></li>
                <li>
                    <a href="#render-b%e1%ba%a3ng-x%e1%ba%bfp-h%e1%ba%a1ng" aria-label="Render b·∫£ng x·∫øp h·∫°ng">Render b·∫£ng x·∫øp h·∫°ng</a></li>
                <li>
                    <a href="#th%c3%aam-ng%c6%b0%e1%bb%9di-ch%c6%a1i-v%c3%a0o-b%e1%ba%a3ng-x%e1%ba%bfp-h%e1%ba%a1ng" aria-label="Th√™m ng∆∞·ªùi ch∆°i v√†o b·∫£ng x·∫øp h·∫°ng">Th√™m ng∆∞·ªùi ch∆°i v√†o b·∫£ng x·∫øp h·∫°ng</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>Ch√†o m·ªçi ng∆∞·ªùi, ·ªü b√†i vi·∫øt <a href="https://techmaster.vn/posts/36506/thu-tai-cao-phim-voi-typing-game-javascript-phan-2">Typing Game (ph·∫ßn 2)</a> m√¨nh ƒë√£ h∆∞·ªõng d·∫´n c√°c b·∫°n c√°c ch·ª©c nƒÉng : ƒê·∫øm ng∆∞·ª£c th·ªùi gian, x·ª≠ l√Ω khi ng∆∞·ªùi ch∆°i g√µ t·ª´, ch∆°i l·∫°i game</p>
<blockquote>
<p>Kh√¥ng bi·∫øt trong qu√° tr√¨nh th·ª±c hi·ªán c√°c b·∫°n c√≥ g·∫∑p l·ªói l·∫ßm g√¨ kh√¥ng, h√£y comment cho m√¨nh bi·∫øt nh√©</p>
</blockquote>
<p>Trong n·ªôi dung b√†i vi·∫øt h∆∞·ªõng d·∫´n Typing Game (ph·∫ßn 3), m√¨nh s·∫Ω ti·∫øp t·ª•c l√†m c√°c ch·ª©c nƒÉng c√≤n l·∫°i c·ªßa Typing game bao g·ªìm :</p>
<ul>
<li>C·∫≠p nh·∫≠t k·∫øt qu·∫£ ng∆∞∆°i ch∆°i</li>
<li>Demo ch·ª©c nƒÉng b·∫£ng x·∫øp h·∫°ng ng∆∞·ªùi ch∆°i</li>
</ul>
<p><strong>Ok, Let&rsquo;s go !!</strong> üòÅ</p>
<h2 id="c·∫≠p-nh·∫≠t-k·∫øt-qu·∫£-ng∆∞∆°i-ch∆°i">C·∫≠p nh·∫≠t k·∫øt qu·∫£ ng∆∞∆°i ch∆°i<a hidden class="anchor" aria-hidden="true" href="#c·∫≠p-nh·∫≠t-k·∫øt-qu·∫£-ng∆∞∆°i-ch∆°i">#</a></h2>
<p>Khi n√†o ch√∫ng ta c·∫≠p nh·∫≠t k·∫øt qu·∫£ cho ng∆∞·ªùi?</p>
<p>T·∫•t nhi√™n l√† khi h·∫øt th·ªùi gian r·ªìi ph·∫£i kh√¥ng n√†o (time = 0). V·∫≠y khi c·∫≠p nh·∫≠t k·∫øt qu·∫£ cho ng∆∞·ªùi ch∆°i, ch√∫ng ta c·∫ßn hi·ªÉn th·ªã c√°c th√¥ng tin g√¨</p>
<p><img loading="lazy" src="https://media.techmaster.vn/api/static/9479/c2n6v9c51co7q82829l0" alt="th√¥ng tin ng∆∞·ªùi ch∆°i"  />
</p>
<p>T·ª´ ·∫£nh tr√™n, ch√∫ng ta c√≥ th·ªÉ d·ªÖ d√†ng nh·∫≠n th·∫•y, c√°c th√¥ng tin c·∫ßn c·∫≠p nh·∫≠t bao g·ªìm :</p>
<ul>
<li>Ch·ªâ s·ªë WPM : S·ªë t·ª´ g√µ m·ªói ph√∫t</li>
<li>S·ªë k√Ω t·ª± g√µ ƒë√∫ng</li>
<li>S·ªë k√Ω t·ª± g√µ sai</li>
<li>T·ªïng s·ªë k√Ω t·ª± ƒë√£ g√µ</li>
<li>ƒê·ªô ch√≠nh x√°c khi g√µ</li>
<li>S·ªë t·ª´ g√µ ƒë√∫ng</li>
<li>S·ªë t·ª´ g√µ sai</li>
</ul>
<p>R·∫•t nhi·ªÅu th√¥ng tin ph·∫£i kh√¥ng n√†o, ch√∫ng ta ph·∫£i t·ª± m√¨nh t√≠nh to√°n th√¥i</p>
<pre tabindex="0"><code class="language-lang-javascript" data-lang="lang-javascript">function countdownTime() {
   ...

    if (time == 0) {
        ...

        // C·∫≠p nh·∫≠t k·∫øt qu·∫£ ng∆∞·ªùi ch∆°i
        updateInfoPlayer();
    }
}
</code></pre><p>Trong function <strong>countdownTime()</strong>, khi <strong>time = 0</strong>, m√¨nh s·∫Ω g·ªçi function <strong>updateInfoPlayer()</strong> ƒë·ªÉ ti·∫øn h√†nh c·∫≠p nh·∫≠t k·∫øt qu·∫£ cho ng∆∞·ªùi ch∆°i</p>
<pre tabindex="0"><code class="language-lang-javascript" data-lang="lang-javascript">// Th√¥ng tin ng∆∞·ªùi ch∆°i
const wordsCorrectEl = document.querySelector(&#39;.words-correct&#39;);
const wordsWrongEl = document.querySelector(&#39;.words-wrong&#39;);
const wpmCountEl = document.querySelector(&#39;.wps-count&#39;);
const characterCorrectCountEl = document.querySelector(&#39;.character-correct-count&#39;);
const characterWrongCountEl = document.querySelector(&#39;.character-wrong-count&#39;);
const characterCountEl = document.querySelector(&#39;.character-count&#39;);
const percentCorrectEl = document.querySelector(&#39;.percent-correct&#39;);

function updateInfoPlayer() {
    let spans = document.querySelectorAll(&#39;#words span&#39;);

    let totalCorrectWords = 0; // T·ªïng s·ªë t·ª´ g√µ ƒë√∫ng
    let totalWrongWords = 0; // T·ªïng s·ªë t·ª´ g√µ sai
    let totalCorrectCharacters = 0; // T·ªïng s·ªë k√Ω t·ª± g√µ ƒë√∫ng
    let totalWrongCharacters = 0; // T·ªïng s·ªë k√Ω t·ª± g√µ sai
    let totalCharacters = 0; // T·ªïng s·ªë k√Ω t·ª± ƒë√£ g√µ

    for (let i = 0; i &lt; spans.length; i++) {
        // ƒê·∫øm s·ªë t·ª´ v√† k√Ω t·ª± ƒë√∫ng
        if (spans[i].classList.contains(&#39;correct&#39;)) {
            totalCorrectWords++;
            totalCorrectCharacters += spans[i].innerText.length;
        }
        // ƒê·∫øm s·ªë t·ª´ v√† k√Ω t·ª± sai
        if (spans[i].classList.contains(&#39;wrong&#39;)) {
            totalWrongWords++;
            totalWrongCharacters += spans[i].innerText.length;
        }
    }
    // C·∫≠p nh·∫≠t s·ªë t·ª´ ƒë√∫ng - sai
    wordsCorrectEl.innerText = totalCorrectWords;
    wordsWrongEl.innerText = totalWrongWords;

    // T√≠nh to√°n WPM
    totalCharacters = totalCorrectCharacters + totalWrongCharacters;
    wpm = Math.round(totalCharacters / 5 / (wpmTime / 60));
    wpmCountEl.innerText = `${wpm} WPM`;

    // C·∫≠p nh·∫≠t s·ªë k√Ω t·ª± ƒë√∫ng - sai
    characterCorrectCountEl.innerText = totalCorrectCharacters;
    characterWrongCountEl.innerText = totalWrongCharacters;
    characterCountEl.innerText = totalCharacters;

    // C·∫≠p nh·∫≠t ph·∫ßn trƒÉm t·ª´ g√µ ch√≠nh x√°c
    percentCorrectEl.innerText = `${(
        (totalCorrectWords * 100) /
        (totalCorrectWords + totalWrongWords)
    ).toFixed(2)}%`;
}
</code></pre><p>V√¨ function tr√™n m√¨nh c·∫ßn t√≠nh to√°n r·∫•t nhi·ªÅu th√¥ng tin c·ªßa ng∆∞·ªùi ch∆°i n√™n c√≥ h∆°i d√†i 1 t√≠</p>
<p>ƒê·ªÉ t√≠nh to√°n s·ªë t·ª´ v√† k√Ω t·ª± ƒë√∫ng, m√¨nh s·∫Ω duy·ªát qua m·∫£ng <strong>spans</strong>, v·ªõi m·ªói v√≤ng l·∫∑p m√¨nh s·∫Ω ki·ªÉm tra xem ph·∫ßn t·ª≠ span ƒë√≥ c√≥ ch·ª©a class <strong>&lsquo;correct&rsquo;</strong> hay kh√¥ng. Tr∆∞·ªùng h·ª£p ph·∫ßn t·ª≠ span ƒë√≥ c√≥ ch·ª©a class <strong>&lsquo;correct&rsquo;</strong> (t·ª©c l√† t·ª´ n√†y ƒë√£ g√µ ƒë√∫ng), m√¨nh s·∫Ω tƒÉng <strong>totalCorrectWords (T·ªïng s·ªë t·ª´ g√µ ƒë√∫ng)</strong> l√™n 1 ƒë∆°n v·ªã, v√† <strong>totalCorrectCharacters (T·ªïng s·ªë k√Ω t·ª± g√µ ƒë√∫ng)</strong> s·∫Ω ƒë∆∞·ª£c c·ªông d·ªìn v·ªõi ƒë·ªô d√†i c·ªßa n·ªôi dung trong th·∫ª span ƒë√≥</p>
<p>V·ªõi t·ª´ v√† k√Ω t·ª± g√µ sai m√¨nh c≈©ng l√†m t∆∞∆°ng t·ª± b·∫±ng vi·ªác ki·ªÉm tra v·ªõi class <strong>&lsquo;wrong&rsquo;</strong></p>
<p><img loading="lazy" src="https://media.techmaster.vn/api/static/9479/c2n756s51co7q82829lg" alt="C√¥ng th·ª©c t√≠nh wpm"  />
</p>
<p>Tr√™n m·∫°ng c√≥ nhi·ªÅu c√¥ng th·ª©c t√≠nh WPM v·ªõi m·ª©c ƒë·ªô ph·ª©c t·∫°p kh√°c nhau, trong b√†i vi·∫øt n√†y, ƒë·ªÉ ƒë∆°n gi·∫£n h√≥a m√¨nh ƒë√£ √°p d·ª•ng c√¥ng th·ª©c tr√™n</p>
<p>·ªû function <strong>updateInfoPlayer()</strong> c√≥ m·ªôt ƒëo·∫°n m√† c√°c b·∫°n c·∫ßn ch√∫ √Ω</p>
<pre tabindex="0"><code class="language-lang-javascript" data-lang="lang-javascript">wpm = Math.round(totalCharacters / 5 / (wpmTime / 60));
</code></pre><p>Trong c√¥ng th·ª©c tr√™n m√¨nh c√≥ s·ª≠ d·ª•ng <strong>wpmTime</strong> m√† kh√¥ng ph·∫£i l√† <strong>time</strong>, b·ªüi v√¨ khi m√¨nh c·∫≠p nh·∫≠t th√¥ng tin ng∆∞·ªùi ch∆°i, l√∫c n√†y <strong>time = 0</strong> r·ªìi, n·∫øu m√¨nh √°p d·ª•ng v√†o c√¥ng th·ª©c tr√™n s·∫Ω cho k·∫øt qu·∫£ l√† &rsquo;&rsquo; <strong>infinity</strong>&quot;</p>
<p>N√™n l√∫c n√†y m√¨nh s·∫Ω t·∫°o ra bi·∫øn <strong>wpmTime = time</strong> l√∫c kh·ªüi t·∫°o ch√∫ng ta kh·ªüi t·∫°o gi√° tr·ªã <strong>time</strong> ban ƒë·∫ßu trong function <strong>init()</strong></p>
<pre tabindex="0"><code class="language-lang-javascript" data-lang="lang-javascript">let wpmTime;
let wpm
function init() {
    time = 10;
    wpmTime = time;
    wpm = 0;

    // ...
}
</code></pre><p>C√°c b·∫°n c√≥ th·ªÉ ch∆°i th·ª≠ ƒë·ªÉ xem m·ª©c ƒë·ªô c√†o ph√≠m c·ªßa m√¨nh ƒëang ·ªü m·ª©c n√†o nh√©</p>
<ul>
<li>T·ªëc ƒë·ªô ƒë√°nh m√°y th·∫•p: 0-60 WPM</li>
<li>T·ªëc ƒë·ªô ƒë√°nh m√°y trung b√¨nh: 60-90 WPM</li>
<li>T·ªëc ƒë·ªô ƒë√°nh m√°y cao: 90-130 WPM</li>
<li>T·ªëc ƒë·ªô ƒë√°nh m√°y chuy√™n nghi·ªáp: 130-170 WPM</li>
</ul>
<blockquote>
<p>T·ªëc ƒë·ªô c·ªßa m√¨nh ·ªü m·ª©c trung b√¨nh th√¥i, ƒë·ªß ƒë·ªÉ toxic v·ªõi ƒë·ªìng ƒë·ªôi trong c√°c pha combat t·ªïng 5 vs 5 üòÅ</p>
</blockquote>
<h2 id="b·∫£ng-x·∫øp-h·∫°ng-ng∆∞·ªùi-ch∆°i">B·∫£ng x·∫øp h·∫°ng ng∆∞·ªùi ch∆°i<a hidden class="anchor" aria-hidden="true" href="#b·∫£ng-x·∫øp-h·∫°ng-ng∆∞·ªùi-ch∆°i">#</a></h2>
<p>ƒê·ªÉ tƒÉng th√™m ph·∫ßn gay c·∫•n m√† c√≥ l√†m th√™m ch·ª©c nƒÉng b·∫£ng x·∫øp h·∫°ng ng∆∞·ªùi ch∆°i</p>
<p>Giao di·ªán ph·∫ßn b·∫£ng x·∫øp h·∫°ng n√†y ch√∫ng ta c√≥ th·ªÉ quan s√°t nh∆∞ sau</p>
<p><img loading="lazy" src="https://media.techmaster.vn/api/static/9479/c2n7us451co7q82829mg" alt="b·∫£ng x·∫øp h·∫°ng ng∆∞·ªùi ch∆°i"  />
</p>
<p>Giao di·ªán tr√™n l√† m√¨nh ƒë√£ fix c·ª©ng code trong m√£ HTML ƒë·ªÉ c√°c b·∫°n c√≥ c√°i nh√¨n tr·ª±c quan cho ph·∫ßn b·∫£ng x·∫øp h·∫°ng n√†y. ·ªû ƒë√¢y m√¨nh ƒë√£ v√≠ d·ª• v·ªõi 3 ng∆∞·ªùi ch∆°i. Ch√∫ng ta c√≥ th·ªÉ d·ªÖ d√†ng nh·∫≠n th·∫•y ƒë∆∞·ª£c, v·ªõi m·ªói ng∆∞·ªùi ch∆°i ch√∫ng ta c·∫ßn hi·ªÉn th·ªã c√°c th√¥ng tin g√¨</p>
<ul>
<li>·∫¢nh ng∆∞·ªùi ch∆°i</li>
<li>T√™n ng∆∞·ªùi ch∆°i</li>
<li>Ch·ªâ s·ªë wpm</li>
<li>Th·ªùi gian ch∆°i (ƒë·ªãnh d·∫°ng <strong>hh:mm:ss - dd/mm/yyyy</strong>)</li>
</ul>
<p>ƒê·ªÉ linh ƒë·ªông cho vi·ªác hi·ªán th·ªã, kh√¥ng fix c·ª©ng code html v√† ch√∫ng ta c√≥ th·ªÉ th√™m b·∫£n ghi v√†o b·∫£ng x·∫øp h·∫°ng khi ng∆∞·ªùi ch∆°i k·∫øt th√∫c l∆∞·ª£t ch∆°i. V√¨ v·∫≠y m√¨nh ƒë√£ mockup m·ªôt m·∫£ng <strong>ranking</strong> ƒë·ªÉ ph·ª•c v·ª• cho ƒëi·ªÅu n√†y, m·ªói ph·∫ßn t·ª≠ trong m·∫£ng <strong>ranking</strong> n√†y s·∫Ω ƒë·∫°i di·ªán cho th√¥ng tin c·ªßa ng∆∞·ªùi ch∆°i</p>
<pre tabindex="0"><code class="language-lang-javascript" data-lang="lang-javascript">// Mock up m·∫£ng rank
let ranking = [
    {
        avatar: &#39;https://images.unsplash.com/photo-1507525428034-b723cf961d3e?ixid=MnwxMjA3fDB8MHxzZWFyY2h8MXx8bmhhJTIwdHJhbmclMjBiZWFjaHxlbnwwfHwwfHw%3D&amp;ixlib=rb-1.2.1&amp;w=1000&amp;q=80&#39;,
        username: &#39;Nguyen Van A&#39;,
        wpm: 10,
        time: formatDate(new Date(2021, 3, 27, 11, 33, 30)),
    },
    {
        avatar: &#39;https://ec.europa.eu/jrc/sites/jrcsh/files/styles/normal-responsive/public/fotolia-92027264european-day-forest-green-forest.jpg?itok=biCWJPQQ&#39;,
        username: &#39;Tran Van B&#39;,
        wpm: 500,
        time: formatDate(new Date(2021, 3, 26, 16, 33, 30)),
    },
    {
        avatar: &#39;https://images.unsplash.com/photo-1569389397653-c04fe624e663?ixid=MnwxMjA3fDF8MHxlZGl0b3JpYWwtZmVlZHwxfHx8ZW58MHx8fHw%3D&amp;ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=500&amp;q=60&#39;,
        username: &#39;Phan Thi C&#39;,
        wpm: 151,
        time: formatDate(new Date(2021, 3, 27, 02, 33, 30)),
    },
];
</code></pre><p>Trong m·∫£ng ranking, m√¨nh ƒë√£ mockup th√¥ng tin c·ªßa 3 user, m·ªói user bao g·ªìm c√°c th√¥ng tin nh∆∞ : <strong>avatar, username, wpm, time</strong></p>
<p>Ri√™ng ƒë·ªëi v·ªõi thu·ªôc t√≠nh <strong>time</strong>, m√¨nh c√≥ ƒë·ªãnh nghƒ©a th√™m function <strong>formatDate()</strong> ƒë·ªÉ format time theo chu·∫©n <strong>hh:mm:ss - dd/mm/yyyy</strong></p>
<pre tabindex="0"><code class="language-lang-javascript" data-lang="lang-javascript">function formatDate(date) {
    let year = date.getFullYear();
    let month = `0${date.getMonth() + 1}`.slice(-2);
    let day = `0${date.getDate()}`.slice(-2);

    let hour = `0${date.getHours()}`.slice(-2);
    let minute = `0${date.getMinutes()}`.slice(-2);
    let second = `0${date.getSeconds()}`.slice(-2);

    return `${hour}:${minute}:${second} - ${day}/${month}/${year}`;
}
</code></pre><p>Function <strong>formatDate()</strong> c≈©ng t∆∞∆°ng t·ª± nh∆∞ <strong>covertTime()</strong>, ƒë·ªÉ ƒë·∫£m b·∫£o th·ªùi gian hi·ªÉn th·ªã ƒë√∫ng theo ƒë·ªãnh d·∫°ng m√† m√¨nh mong mu·ªën ( <strong>hh:mm:ss - dd/mm/yyyy</strong>)</p>
<h2 id="render-b·∫£ng-x·∫øp-h·∫°ng">Render b·∫£ng x·∫øp h·∫°ng<a hidden class="anchor" aria-hidden="true" href="#render-b·∫£ng-x·∫øp-h·∫°ng">#</a></h2>
<pre tabindex="0"><code class="language-lang-javascript" data-lang="lang-javascript">const tableEl = document.querySelector(&#39;tbody&#39;);

// render ranking
function renderRanking(arr) {
    // S·∫Øp x·∫øp th·ª© t·ª± ng∆∞·ªùi ch∆°i theo wpm gi·∫£m d·∫ßn
    let arrSort = arr.sort(function (a, b) {
        return b.wpm - a.wpm;
    });

    // L·∫•y ra danh s√°ch TOP 10
    let arrTop10 = arrSort.slice(0, 10)

    // Render l√™n giao di·ªán
    tableEl.innerHTML = &#39;&#39;;
    for (let i = 0; i &lt; arrTop10.length; i++) {
        const u = arrTop10[i]
        tableEl.innerHTML += `
            &lt;tr&gt;
                &lt;td&gt;${i + 1}&lt;/td&gt;
                &lt;td&gt;
                    &lt;img src=${u.avatar} alt=&#34;${u.username}&#34;&gt;
                &lt;/td&gt;
                &lt;td&gt;${u.username}&lt;/td&gt;
                &lt;td class=&#34;font-weight-bold&#34;&gt;${u.wpm}&lt;/td&gt;
                &lt;td class=&#34;font-italic&#34;&gt;${u.time}&lt;/td&gt;
            &lt;/tr&gt;
        `;
    }
}
</code></pre><p>ƒê·ªÉ render m·∫£ng ranking ch√∫ng ta v·ª´a mockup ra ngo√†i giao di·ªán, m√¨nh ƒë√£ ƒë·ªãnh nghƒ©a function <strong>renderRanking()</strong> v·ªõi tham s·ªë truy·ªÅn v√†o l√† m·∫£ng <strong>arr</strong></p>
<p>Trong function <strong>renderRanking()</strong> n√†y m√¨nh ti·∫øn h√†nh chia l√†m 3 b∆∞·ªõc:</p>
<ul>
<li>S·∫Øp x·∫øp th·ª© t·ª± ng∆∞·ªùi ch∆°i theo wpm gi·∫£m d·∫ßn</li>
<li>L·∫•y ra danh s√°ch TOP 10</li>
<li>Render l√™n giao di·ªán</li>
</ul>
<p>V·ªõi b∆∞·ªõc 1 v√† b∆∞·ªõc 2 kh√¥ng c√≥ g√¨ ƒë·∫∑c bi·ªát, ri√™ng ƒë·ªëi v·ªõi b∆∞·ªõc 3 m√¨nh ti·∫øn h√†nh x·ª≠ l√Ω nh∆∞ sau:</p>
<p>ƒê·∫ßu ti√™n clear h·∫øt d·ªØ li·ªáu c·ªßa table ƒëang fix c·ª©ng trong m√£ html ƒë·ªÉ render d·ªØ li·ªáu t·ª´ m·∫£ng ƒë√£ mockup t·ª´ tr∆∞·ªõc</p>
<pre tabindex="0"><code class="language-lang-javascript" data-lang="lang-javascript">tableEl.innerHTML = &#39;&#39;;
</code></pre><p>Sau ƒë√≥ s·ª≠ d·ª•ng v√≤ng l·∫∑p <strong>for</strong> ƒë·ªÉ duy·ªát qua c√°c ph·∫ßn t·ª≠ c·ªßa m·∫£ng <strong>arrTop10</strong> (m·ªói ph·∫ßn t·ª≠ c·ªßa m·∫£ng l√† object ch·ª©a th√¥ng tin c·ªßa ng∆∞·ªùi ch∆°i)</p>
<p>V·ªõi m·ªói v√≤ng l·∫∑p, m√¨nh s·∫Ω t·∫°o ra m·ªôt c·∫•u tr√∫c HTML c·ªßa 1 b·∫£n ghi ranking (c√°c b·∫°n c√≥ th·ªÉ copy trong file html ban ƒë·∫ßu nh√©, to√†n b·ªô th·∫ª <strong>tr</strong> trong <strong>tbody</strong> c·ªßa table ƒë·∫•y). Sau ƒë√≥ m√¨nh ch·ªâ c·∫ßn ch√®n c√°c gi√° tr·ªã t∆∞∆°ng ·ª©ng v√†o th√¥i, ·ªü ƒë√¢y ƒë·ªÉ ch√®n gi√° tr·ªã m√¨nh s·ª≠ d·ª•ng c√∫ ph√°p c·ªßa <strong>template string</strong> trong ES6 (${}) nh∆∞ng c√°c b·∫°n n√™n nh·ªõ ph·∫£i ƒë·∫∑t trong d·∫•u <strong>backtick</strong> nh√© (``) ch·ª© kh√¥ng ph·∫£i d·∫•u nh√°y k√©p ƒë√¢u.</p>
<p>Sau khi ƒë·ªãnh nghƒ©a xong function <strong>renderRanking()</strong> m√¨nh s·∫Ω ti·∫øn h√†nh g·ªçi n√≥ trong function <strong>init()</strong></p>
<pre tabindex="0"><code class="language-lang-javascript" data-lang="lang-javascript">function init() {
    // ...

    // Render b·∫£ng x·∫øp h·∫°ng ng∆∞·ªùi ch∆°i
    renderRanking(ranking);
}
</code></pre><p>K·∫øt qu·∫£ sau khi mockup v√† hi·ªÉn th·ªã b·∫£ng x·∫øp h·∫°ng</p>
<p><img loading="lazy" src="https://media.techmaster.vn/api/static/9479/c2ni9hc51co7q82829o0" alt="K·∫øt qu·∫£ sau khi mockup v√† hi·ªÉn th·ªã b·∫£ng x·∫øp h·∫°ng"  />
</p>
<p>Th·∫≠t tuy·ªát ph·∫£i kh√¥ng n√†o üòÅ</p>
<h2 id="th√™m-ng∆∞·ªùi-ch∆°i-v√†o-b·∫£ng-x·∫øp-h·∫°ng">Th√™m ng∆∞·ªùi ch∆°i v√†o b·∫£ng x·∫øp h·∫°ng<a hidden class="anchor" aria-hidden="true" href="#th√™m-ng∆∞·ªùi-ch∆°i-v√†o-b·∫£ng-x·∫øp-h·∫°ng">#</a></h2>
<pre tabindex="0"><code class="language-lang-javascript" data-lang="lang-javascript">function countdownTime() {
    // ...
    if (time == 0) {
        // ...

        addPlayerToRanking();
    }
}
</code></pre><p>Khi <strong>time = 0</strong>, m√¨nh s·∫Ω g·ªçi function <strong>addPlayerToRanking()</strong> ƒë·ªÉ th√™m b·∫£n ghi c·ªßa ng∆∞·ªùi ch∆°i v√†o b·∫£ng x·∫øp h·∫°ng</p>
<pre tabindex="0"><code class="language-lang-javascript" data-lang="lang-javascript">function addPlayerToRanking() {
    // T·∫°o 1 b·∫£n ghi ng∆∞·ªùi ch∆°i
    let player = {
        avatar: &#39;https://images.unsplash.com/photo-1564564321837-a57b7070ac4f?ixid=MnwxMjA3fDB8MHxzZWFyY2h8Nnx8bWFufGVufDB8fDB8fA%3D%3D&amp;ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=500&amp;q=60&#39;,
        username: &#39;B√πi Hi√™n&#39;,
        wpm: wpm,
        time: formatDate(new Date()),
    }

    // Th√™m b·∫£n ghi v√†o m·∫£ng ranking
    ranking.push(player)

    // Render l·∫°i b·∫£ng x·∫øp h·∫°ng sau khi th√™m b·∫£n ghi m·ªõi
    renderRanking(ranking)
}
</code></pre><p>V√¨ hi·ªán t·∫°i trong game ch∆∞a c√≥ c∆° ch·∫ø ƒëƒÉng nh·∫≠p ·ªü bi·∫øt ng∆∞·ªùi ch∆°i hi·ªán t·∫°i l√† ai? N√™n ·ªü ƒë√¢y m√¨nh c√≥ t·∫°o ra bi·∫øn <strong>player</strong> ch∆∞a th√¥ng tin ng∆∞·ªùi ch∆°i v·ª´a k·∫øt th√∫c l∆∞·ª£t ch∆°i c·ªßa m√¨nh</p>
<p>Trong <strong>player</strong> c√≥ 2 th√¥ng tin m√† m√¨nh ƒëƒÉng fix c·ª©ng l√† <strong>avatar</strong> v√† <strong>username</strong>, c√≤n <strong>wpm</strong> l√† k·∫øt qu·∫£ c·ªßa ng∆∞·ªùi ch∆°i trong l·∫ßn ch∆°i ƒë√≥, v√† <strong>time</strong> l√† th·ªùi gian sau khi l∆∞·ª£t ch∆°i k·∫øt th√∫c</p>
<p>Ti·∫øp theo ch√∫ng ta s·∫Ω th√™m b·∫£n ghi <strong>player</strong> v√†o m·∫£ng <strong>ranking</strong></p>
<p>V√† cu·ªëi c√πng l√† g·ªçi <strong>renderRanking(ranking)</strong> ƒë·ªÉ render l·∫°i b·∫£ng x·∫øp h·∫°ng sau khi th√™m b·∫£n ghi m·ªõi</p>
<p>K·∫øt qu·∫£ sau 1 s·ªë l∆∞·ª£t ch∆°i c·ªßa m√¨nh nh∆∞ sau</p>
<p><img loading="lazy" src="https://media.techmaster.vn/api/static/9479/c2ni8gk51co7q82829ng" alt="k·∫øt qu·∫£ sau m·ªôt s·ªë l∆∞·ª£t ch∆°i game"  />
</p>
<hr>
<p>Source code c·ªßa ph·∫ßn n√†y m√¨nh ƒë·ªÉ ·ªü ƒë√¢y nh√© : <a href="https://github.com/buihien0109/typing-game-javascript/tree/master/typing-part-3">https://github.com/buihien0109/typing-game-javascript/tree/master/typing-part-3</a></p>
<p>C√°c b·∫°n c√≥ th·ªÉ tham kh·∫£o th√™m kh√≥a h·ªçc n√†y nh√©:</p>
<ul>
<li>Javascript cƒÉn b·∫£n - T·ªïng h·ª£p 12 game huy·ªÅn tho·∫°i - <a href="https://techmaster.vn/khoa-hoc/ev5/javascript-can-ban-tong-hop-12-game-huyen-thoai">t·∫°i ƒë√¢y</a>.</li>
<li>Kh√≥a h·ªçc Web Frontend (HTML, CSS, JavaScript) + ReactJs - <a href="https://techmaster.vn/lo-trinh/front-end">t·∫°i ƒë√¢y</a></li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://buihien.org/tags/frontend/">FrontEnd</a></li>
      <li><a href="https://buihien.org/tags/javascript/">Javascript</a></li>
      <li><a href="https://buihien.org/tags/web/">Web</a></li>
      <li><a href="https://buihien.org/tags/game/">Game</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://buihien.org">Tech&#39;s Blog</a></span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
